<mvc:View
    controllerName="sapui5task2.controller.oDataV2"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    core:require="{FloatType: 'sap/ui/model/type/Float'}"
>
    <Table
        id="products_table_V2"
        items="{
            path: 'odataV2>/Products'
        }"
        growing="true"
        growingThreshold="10"
        mode="MultiSelect"
        selectionChange=".onProductSelect"
    >
        <headerToolbar>
            <OverflowToolbar id="products_table_ToolbarV2">
                <Title
                    id="products_counter_titleV2"
                    text="{i18n>productsTitle}"
                    level="H2"
                />

                <Button
                    id="add_product_button"
                    icon="sap-icon://add"
                    text="{i18n>addRecordButton}"
                    press=".onOpenProductDialog('add')"
                />

                <Button
                    id="delete_button_V2"
                    icon="sap-icon://delete"
                    text="{i18n>deleteRecordButton}"
                    press=".onDeleteProducts"
                    enabled="{= ${view>/selectedRows}.length > 0}"
                />
                <ToolbarSpacer id="product_table_toolbar_spacerV2" />

                <Input
                    id="search_product_input"
                    width="20rem"
                    placeholder="{i18n>searchProductPlaceholder}"
                    liveChange=".onFilterProducts"
                />

                <ComboBox
                    id="sort_combo_box"
                    placeholder="{i18n>sortProductPlaceholder}"
                    change=".onSortChange"
                    items="{path: 'view>/sortOptions'}"
                >
                    <core:Item
                        id="sort_item_options"
                        key="{view>key}"
                        text="{view>text}"
                    />
                </ComboBox>
            </OverflowToolbar>
        </headerToolbar>
        <columns>
            <Column id="product_name_columnV2">
                <Text
                    id="product_name_column_textV2"
                    text="{i18n>productNameColumn}"
                />
            </Column>
            <Column id="product_description_columnV2">
                <Text
                    id="product_description_column_textV2"
                    text="{i18n>productDescriptionColumn}"
                />
            </Column>
            <Column id="product_release_date_columnV2">
                <Text
                    id="product_release_column_textV2"
                    text="{i18n>productReleaseDateColumn}"
                />
            </Column>
            <Column id="product_discontinued_date_columnV2">
                <Text
                    id="product_discontinued_column_textV2"
                    text="{i18n>productDiscontinuedDateColumn}"
                />
            </Column>
            <Column id="product_rating_columnV2">
                <Text
                    id="product_rating_column_textV2"
                    text="{i18n>productRatingColumn}"
                />
            </Column>
            <Column id="product_price_columnV2">
                <Text
                    id="product_price_column_textV2"
                    text="{i18n>productPriceColumn}"
                />
            </Column>

            <Column id="actions_columnV2">
                <Text
                    id="actions_column_textV2"
                    text="{i18n>productActionsColumn}"
                />
            </Column>
        </columns>
        <items>
            <ColumnListItem
                id="product_column_list_itemV2"
                press=".onItemPress"
                type="Navigation"
            >
                <cells>
                    <Text
                        id="product_cell_nameV2"
                        text="{odataV2>Name}"
                    />
                    <Text
                        id="product_cell_descriptionV2"
                        text="{odataV2>Description}"
                    />
                    <Text
                        id="product_cell_release_dateV2"
                        text="{
                            path: 'odataV2>ReleaseDate',
                            type: 'sap.ui.model.type.Date',
                            formatOptions: {
                                pattern: 'yyyy'
                            }
                        }"
                    />

                    <Text
                        id="product_cell_discontinued_dateV2"
                        text="{
                            path: 'odataV2>DiscontinuedDate',
                            type: 'sap.ui.model.odata.type.DateTimeOffset'
                        }"
                    />

                    <RatingIndicator
                        id="product_cell_ratingV2"
                        value="{odataV2>Rating}"
                        editable="false"
                        enabled="false"
                        iconSize="12px"
                        maxValue="5"
                    />
                    <ObjectNumber
                        id="product_cell_priceV2"
                        number="{
                            path: 'odataV2>Price',
                            type: 'FloatType',
                            formatOptions: {
					            minIntegerDigits: 2
				            }
                        }"
                    />
                    <Button
                        id="edit_product_buttonV2"
                        text="{i18n>editButton}"
                        press=".onEditProduct"
                    />
                </cells>
            </ColumnListItem>
        </items>
    </Table>
</mvc:View>
