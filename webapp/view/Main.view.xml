<mvc:View
    controllerName="sapui5task2.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
>
    <Page
        id="page"
        title="{i18n>title}"
    >
        <content>
            <Table
                id="booksTable"
                items="{
                    path: '/books'
                }"
                growing="true"
                growingThreshold="10"
                mode="MultiSelect"
                selectionChange=".onBookSelect"
            >
                <headerToolbar>
                    <OverflowToolbar id="books_table_Toolbar">
                        <Title
                            id="books_counter_title"
                            text="Books ({= ${/books}.length })"
                            level="H2"
                        />
                        <Button
                            id="add_book_button"
                            icon="sap-icon://add"
                            text="Add Record"
                            press=".onOpenAddBookDialog"
                        />
                        <Button
                            id="delete_book_button"
                            icon="sap-icon://delete"
                            text="Delete Record"
                            press=".onOpenCofirmDeleteDialog"
                            enabled="{= ${view>/isRowsSelected}}"
                        />
                        <ToolbarSpacer id="book_table_toolbar_spacer" />
                        <Input
                            id="search_book_input"
                            width="20rem"
                            value="{view>/filters/title}"
                            placeholder="Filter books by Title..."
                        />
                        <Select
                            id="select_genre_select"
                            width="12rem"
                            selectedKey="{view>/filters/genre}"
                            items="{path: 'view>/genres'}"
                            change=".onFilterByTitleAndGenre"
                        >
                            <core:Item
                                id="select_genre_item"
                                xmlns:core="sap.ui.core"
                                key="{view>key}"
                                text="{view>text}"
                            />
                        </Select>
                        <Button
                            id="filter_by_genre_and_select_button"
                            text="Filter"
                            press=".onFilterByTitleAndGenre"
                        />
                    </OverflowToolbar>
                </headerToolbar>

                <columns>
                    <Column id="book_id_column">
                        <Text
                            id="book_id_column_text"
                            text="ID"
                        />
                    </Column>
                    <Column id="book_name_column">
                        <Text
                            id="book_name_column_text"
                            text="Book Name"
                        />
                    </Column>
                    <Column id="book_author_column">
                        <Text
                            id="book_author_column_text"
                            text="Author"
                        />
                    </Column>
                    <Column id="book_genre_column">
                        <Text
                            id="book_genere_column_text"
                            text="Genre"
                        />
                    </Column>
                    <Column id="book_release_date_column">
                        <Text
                            id="book_release_column_text"
                            text="Release Date"
                        />
                    </Column>
                    <Column id="book_availbale_quantitiy_column">
                        <Text
                            id="book_quantity_column_text"
                            text="Available Quantity"
                        />
                    </Column>
                    <Column id="book_actions_column">
                        <Text
                            id="book_actions_column_text"
                            text="Actions"
                        />
                    </Column>
                </columns>

                <items>
                    <ColumnListItem id="book_column_list_item">
                        <cells>
                            <Text
                                id="book_cell_id"
                                text="{ID}"
                            />
                            <HBox id="hbox_cell_name_and_edit_input">
                                <Text
                                    id="book_cell_name"
                                    text="{Name}"
                                    visible="{= !${editMode}}"
                                    class="sapUiTinyMarginEnd"
                                />
                                <Input
                                    id="book_cell_name_input"
                                    value="{Name}"
                                    visible="{= ${editMode}}"
                                    class="sapUiTinyMarginEnd"
                                />
                            </HBox>
                            <Text
                                id="book_cell_author"
                                text="{Author}"
                            />
                            <Text
                                id="book_cell_genre"
                                text="{Genre}"
                            />
                            <Text
                                id="book_cell_date"
                                text="{
                                    path: 'ReleaseDate',
                                    type: 'sap.ui.model.type.Date',
                                    formatOptions: {
                                        pattern: 'yyyy-MM-dd',
                                        source: {
                                            pattern: 'yyyy-MM-dd'
                                        }
                                }}"
                            />
                            <ObjectNumber
                                id="book_cell_quantity"
                                number="{AvailableQuantity}"
                            />
                            <HBox id="hbox_cell_edit_and_save">
                                <Button
                                    id="hbox_cell_edit_and_save_button"
                                    press=".onToggleEdit"
                                    text="{= ${editMode} ? 'Save' : 'Edit Title' }"
                                    type="{= ${editMode} ? 'Emphasized' : 'Default' }"
                                />
                            </HBox>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
    </Page>
</mvc:View>
