<mvc:View
    controllerName="sapui5task2.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
>
    <Page
        id="page"
        title="{i18n>title}"
    >
        <content>
            <IconTabBar id="iconTabBar">
                <items>
                    <IconTabFilter
                        id="jsonTab"
                        key="json"
                        text="{i18n>JSONModel}"
                    >
                        <Table
                            id="booksTable"
                            items="{
                                path: '/books'
                            }"
                            growing="true"
                            growingThreshold="10"
                            mode="MultiSelect"
                            selectionChange=".onBookSelect"
                        >
                            <headerToolbar>
                                <OverflowToolbar id="books_table_Toolbar">
                                    <Title
                                        id="books_counter_title"
                                        text="{i18n>booksCounter} ({= ${/books}.length })"
                                        level="H2"
                                    />
                                    <Button
                                        id="add_book_button"
                                        icon="sap-icon://add"
                                        text="{i18n>addRecordButton}"
                                        press=".onOpenAddBookDialog"
                                    />
                                    <Button
                                        id="delete_book_button"
                                        icon="sap-icon://delete"
                                        text="{i18n>deleteRecordButton}"
                                        press=".onOpenCofirmDeleteDialog"
                                        enabled="{= ${view>/isRowsSelected}}"
                                    />
                                    <ToolbarSpacer
                                        id="book_table_toolbar_spacer"
                                    />
                                    <Input
                                        id="search_book_input"
                                        width="20rem"
                                        value="{view>/filters/title}"
                                        placeholder="{i18n>searchPlaceholder}"
                                    />
                                    <Select
                                        id="select_genre_select"
                                        width="12rem"
                                        selectedKey="{view>/filters/genre}"
                                        items="{path: 'view>/genres'}"
                                        change=".onFilterByTitleAndGenre"
                                    >
                                        <core:Item
                                            id="select_genre_item"
                                            xmlns:core="sap.ui.core"
                                            key="{view>key}"
                                            text="{view>text}"
                                        />
                                    </Select>
                                    <Button
                                        id="filter_by_genre_and_select_button"
                                        text="{i18n>filterButton}"
                                        press=".onFilterByTitleAndGenre"
                                    />
                                </OverflowToolbar>
                            </headerToolbar>

                            <columns>
                                <Column id="book_id_column">
                                    <Text
                                        id="book_id_column_text"
                                        text="{i18n>bookIdColumn}"
                                    />
                                </Column>
                                <Column id="book_name_column">
                                    <Text
                                        id="book_name_column_text"
                                        text="{i18n>bookNameColumn}"
                                    />
                                </Column>
                                <Column id="book_author_column">
                                    <Text
                                        id="book_author_column_text"
                                        text="{i18n>bookAuthorColumn}"
                                    />
                                </Column>
                                <Column id="book_genre_column">
                                    <Text
                                        id="book_genere_column_text"
                                        text="{i18n>bookGenreColumn}"
                                    />
                                </Column>
                                <Column id="book_release_date_column">
                                    <Text
                                        id="book_release_column_text"
                                        text="{i18n>bookReleaseDateColumn}"
                                    />
                                </Column>
                                <Column id="book_availbale_quantitiy_column">
                                    <Text
                                        id="book_quantity_column_text"
                                        text="{i18n>bookQuantityColumn}"
                                    />
                                </Column>
                                <Column id="book_actions_column">
                                    <Text
                                        id="book_actions_column_text"
                                        text="{i18n>bookActionsColumn}"
                                    />
                                </Column>
                            </columns>

                            <items>
                                <ColumnListItem id="book_column_list_item">
                                    <cells>
                                        <Text
                                            id="book_cell_id"
                                            text="{ID}"
                                        />
                                        <HBox
                                            id="hbox_cell_name_and_edit_input"
                                        >
                                            <Text
                                                id="book_cell_name"
                                                text="{Name}"
                                                visible="{= !${editMode}}"
                                                class="sapUiTinyMarginEnd"
                                            />
                                            <Input
                                                id="book_cell_name_input"
                                                value="{Name}"
                                                visible="{= ${editMode}}"
                                                class="sapUiTinyMarginEnd"
                                            />
                                        </HBox>
                                        <Text
                                            id="book_cell_author"
                                            text="{Author}"
                                        />
                                        <Text
                                            id="book_cell_genre"
                                            text="{Genre}"
                                        />
                                        <Text
                                            id="book_cell_date"
                                            text="{
                                                path: 'ReleaseDate',
                                                formatter: '.formatter.formatYear'
                                            }"
                                        />
                                        <ObjectNumber
                                            id="book_cell_quantity"
                                            number="{AvailableQuantity}"
                                        />
                                        <HBox id="hbox_cell_edit_and_save">
                                            <Button
                                                id="hbox_cell_edit_and_save_button"
                                                press=".onToggleEdit"
                                                text="{= ${editMode} ? ${i18n>saveButton} : ${i18n>editTitleButton} }"
                                                type="{= ${editMode} ? 'Emphasized' : 'Default' }"
                                                class="sapUiTinyMarginEnd"
                                            />
                                        </HBox>
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </IconTabFilter>

                    <IconTabFilter
                        id="odataTabV2"
                        key="odata"
                        text="{i18n>oDataV2Model}"
                    >
                        <mvc:XMLView
                            id="oDataV2View"
                            viewName="sapui5task2.view.oDataV2"
                        />
                    </IconTabFilter>

                    <IconTabFilter
                        id="odataTabV4"
                        key="odata"
                        text="{i18n>oDataV4Model}"
                    >
                        <mvc:XMLView
                            id="oDataV4View"
                            viewName="sapui5task2.view.oDataV4"
                        />
                    </IconTabFilter>
                </items>
            </IconTabBar>
        </content>
    </Page>
</mvc:View>
